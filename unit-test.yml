version: 0.2

env:
  variables:
    CHROME_BIN: "/usr/bin/google-chrome"

phases:
  install:
    commands:
    # Update libs
      - apt-get update
    # Headless Chrome
      - apt-get install -y libxss1
      - apt-get install -y libasound2
      - apt-get install -y libnspr4
      - apt-get install -y libnss3
      - apt-get install -y libx11-xcb1
      - apt-get install -y fonts-liberation
      - apt-get install -y libappindicator3-1
      - apt-get install -y libatk-bridge2.0-0
      - apt-get install -y libgtk-3-0
      - apt-get install -y libxtst6
      - apt-get install -y xdg-utils
      - wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
      - sudo dpkg -i google-chrome*.deb
    # Install Angular CLI
      - npm i -g @angular/cli@6.2.4
    # Install project dependencies
      - npm i
  build:
    commands:
    # Run unit tests
      - ng test